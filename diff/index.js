var w=Object.create;var s=Object.defineProperty,z=Object.defineProperties,C=Object.getOwnPropertyDescriptor,F=Object.getOwnPropertyDescriptors,G=Object.getOwnPropertyNames,x=Object.getOwnPropertySymbols,H=Object.getPrototypeOf,$=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var D=(t,r,n)=>r in t?s(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,l=(t,r)=>{for(var n in r||(r={}))$.call(r,n)&&D(t,n,r[n]);if(x)for(var n of x(r))L.call(r,n)&&D(t,n,r[n]);return t},j=(t,r)=>z(t,F(r));var M=(t,r)=>{for(var n in r)s(t,n,{get:r[n],enumerable:!0})},_=(t,r,n,c)=>{if(r&&typeof r=="object"||typeof r=="function")for(let e of G(r))!$.call(t,e)&&e!==n&&s(t,e,{get:()=>r[e],enumerable:!(c=C(r,e))||c.enumerable});return t};var a=(t,r,n)=>(n=t!=null?w(H(t)):{},_(r||!t||!t.__esModule?s(n,"default",{value:t,enumerable:!0}):n,t)),Q=t=>_(s({},"__esModule",{value:!0}),t);var T={};M(T,{diffAfterBefore:()=>R,diffBeforeAfter:()=>P,diffExplain:()=>S,diffObjects:()=>h,diffValues:()=>J,difference:()=>u});module.exports=Q(T);var A=a(require("lodash/isEmpty")),E=a(require("lodash/isEqual")),b=a(require("lodash/isPlainObject")),K=a(require("lodash/set")),N=a(require("lodash/transform")),O=a(require("lodash/uniq")),k=require("deep-diff"),m=require("../json"),y=a(require("lodash/get")),B=a(require("lodash/groupBy")),V=a(require("lodash/compact")),q=a(require("lodash/flattenDeep"));const S=(t,r)=>{let n=h(t,r);const c={N:"added",D:"deleted",E:"edited",A:"array"};return n.map(e=>{var i;const p=e.item,f=p==null?void 0:p.kind;let o="";return f&&(o=c[p.kind]),`${c[e.kind]} ${(0,m.toJSONString)((i=e.path)==null?void 0:i.join("."))} ${e.index>-1?`at ${e.index}`:""} ${f?`${(0,m.toJSONString)(o)} ${f==="N"?(0,m.toJSONString)(p.rhs):(0,m.toJSONString)(p.lhs)}`:`${(0,m.toJSONString)(e.lhs)} -> ${(0,m.toJSONString)(e.rhs)}`}`})},h=(t,r,n)=>{let c=(0,k.diff)(t,r);if((0,A.default)(c))return[];const e=f=>{const o=f.map(i=>j(l({},(0,K.default)(i,i.path.join("."),{before:i.lhs,after:i.rhs})),{path:[...i.path,i.path.join(".")]}));return n=n!=null?n:(0,O.default)(o.map(i=>i.path[0])),p(o,n)},p=(f,o)=>{const i=f.map(I=>(Array.isArray(o)?o:[o]).map(d=>{if(!(0,y.default)(I,"path").includes(d))return;const g=(0,y.default)(I,d);if(g)return j(l({},g),{__identity__:d})}));return(0,B.default)((0,V.default)((0,q.default)(i)),"__identity__")};return(0,m.toObject)(e(c))},J=h;function u(t,r){if(!r)return t;function n(c,e){return(0,N.default)(c,function(p,f,o){(0,E.default)(f,e[o])||(p[o]=(0,b.default)(f)&&(0,b.default)(e[o])?n(f,e[o]):f)})}return n(t,r)}const P=(t,r)=>u(r,t),R=(t,r)=>u(t,r);0&&(module.exports={diffAfterBefore,diffBeforeAfter,diffExplain,diffObjects,diffValues,difference});
